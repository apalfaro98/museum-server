"use strict";(self["webpackChunkcliente"]=self["webpackChunkcliente"]||[]).push([[854],{9315:function(e,t,a){a.r(t),a.d(t,{default:function(){return W}});var i=a(7359),o=a(6190),s=a(4145),r=a(4886),n=a(5151),c=a(4061),l=a(9223),d=a(4324),m=a(7394),u=a(3687),h=a(6313),I=a(7953),p=function(){var e=this,t=e._self._c;return t("div",[t(m.xy,[e.success?t(i.Z,{staticClass:"alert",attrs:{prominent:"",shaped:"",type:"success","max-width":"300px",dismissible:""},on:{click:function(t){e.success=!1}}},[e._v("Donacion realizada exitosamente.")]):e._e()],1),t(n.Z,{staticClass:"elevation-1 mt-2",attrs:{headers:e.headers,items:e.datos,"items-per-page":-1,"hide-default-footer":""},scopedSlots:e._u([{key:"top",fn:function(){return[t(h.Z,{attrs:{flat:""}},[t(I.qW,[e._v("Donaciones")]),t(l.Z,{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t(u.Z),t(c.Z,{attrs:{"max-width":"1000"},model:{value:e.dialogInfo,callback:function(t){e.dialogInfo=t},expression:"dialogInfo"}},[t(s.Z,{staticClass:"pa-4"},[t(r.ZB,["armas"===e.infoItem.section?t("arma-dialog",{attrs:{editedItem:e.articulo}}):"naturales"===e.infoItem.section?t("natural-dialog",{attrs:{editedItem:e.articulo}}):e._e()],1),t(r.h7,[t(u.Z),t(o.Z,{attrs:{color:"red darken-1",text:""},on:{click:e.closeInfo}},[e._v(" Cerrar ")])],1)],1)],1),t(c.Z,{attrs:{"max-width":"1000px"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:i}){return[t(o.Z,e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),a),[e._v(" Nueva Donacion ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("donacion-stepper",{attrs:{editedItem:e.editedItem,formTitle:"Realizar Donacion",isNew:!0},on:{close:e.close,reload:e.reload}})],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:a}){return[t(d.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.detailsItem(a)}}},[e._v(" mdi-information ")])]}}])})],1)},f=[],g=a(1696),b=a(3382),v=a(7068),x=a(6243),Z=a(8687),C=a(535),_=a(5157),k=a(8754),D=a(8491),E=function(){var e=this,t=e._self._c;return t(s.Z,[t(C.Z,{attrs:{width:"full"},model:{value:e.e1,callback:function(t){e.e1=t},expression:"e1"}},[t(k.Rp,[t(D.Z,{attrs:{complete:e.e1>1,step:"1"}},[e._v(" Sección ")]),t(l.Z),t(D.Z,{attrs:{complete:e.e1>2,step:"2"}},[e._v(" Crear ")]),t(l.Z),t(D.Z,{attrs:{step:"3"}},[e._v(" Datos Donacion ")])],1),t(k.gd,[t(_.Z,{attrs:{step:"1"}},[t("h3",{staticClass:"text-center"},[e._v(" ¿A qué sección pertenece el artículo que desea donar? ")]),t("div",{staticClass:"d-flex justify-center"},[t(Z.Z,{staticClass:"font-weight-bold",attrs:{row:""},model:{value:e.section,callback:function(t){e.section=t},expression:"section"}},[t(x.Z,{staticClass:"ma-4 rounded-xl pa-6",class:"armas"===e.section?"radio-green green--text":"radio-gray",attrs:{label:"Armas",value:"armas",color:"armas"===e.section?"success":""}}),t(x.Z,{staticClass:"ma-4 rounded-xl pa-6",class:"armas"===e.section?"radio-gray":"radio-green green--text",attrs:{label:"Ciencias Naturales",value:"naturales",color:"armas"===e.section?"":"success"}})],1)],1),t(r.h7,[t(u.Z),t(o.Z,{attrs:{color:"blue darken-1",text:""},on:{click:e.cancel}},[e._v(" Cancelar ")]),t(o.Z,{attrs:{color:"blue darken-1",text:""},on:{click:e.mostrar}},[e._v(" Siguiente ")])],1)],1),t(_.Z,{attrs:{step:"2"}},["armas"===e.section?t("arma-create-edit",{attrs:{formTitle:"Registrar Arma",editedItem:e.arma,isNew:!0},on:{close:e.cancel,getId:e.getId,reload:function(t){e.e1=3}}}):"naturales"===e.section?t("natural-create-edit",{attrs:{formTitle:"Registrar Artículo",editedItem:e.natural,isNew:!0},on:{close:e.cancel,getId:e.getId,reload:function(t){e.e1=3}}}):e._e()],1),t(_.Z,{attrs:{step:"3"}},[t("donacion-create-edit",{attrs:{isNew:!0,editedItem:e.editedItem,formTitle:e.formTitle},on:{close:e.cancel,reload:e.reload}})],1)],1)],1)],1)},O=[],N=a(5648),w=a(9321),A=a(266),S=a(2118),T=a(1713),y=a(7808),R=function(){var e=this,t=e._self._c;return t(s.Z,{attrs:{elevation:"0"}},[t(r.EB,[t("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])]),t(r.ZB,[t(S.Z,[t(m.Qn,[e.error?t(i.Z,{staticClass:"mb-6",attrs:{dense:"",text:"",outlined:"",type:"error"}},[e._v(" "+e._s(e.error)+" ")]):e._e()],1),t(T.Z,[t(A.Z,{attrs:{cols:"12",sm:"6"}},[t(y.Z,{attrs:{label:"MUNICIPIO",outlined:""},model:{value:e.editedItem.municipio,callback:function(t){e.$set(e.editedItem,"municipio",t)},expression:"editedItem.municipio"}}),t(y.Z,{attrs:{label:"MUSEO",outlined:""},model:{value:e.editedItem.museo,callback:function(t){e.$set(e.editedItem,"museo",t)},expression:"editedItem.museo"}}),t(y.Z,{attrs:{label:"DONANTE",outlined:""},model:{value:e.editedItem.donante,callback:function(t){e.$set(e.editedItem,"donante",t)},expression:"editedItem.donante"}})],1),t(A.Z,{attrs:{cols:"12",sm:"6"}},[t(y.Z,{attrs:{label:"DIRECCION",outlined:""},model:{value:e.editedItem.direccion,callback:function(t){e.$set(e.editedItem,"direccion",t)},expression:"editedItem.direccion"}}),t(y.Z,{attrs:{label:"PERSONA DEL MUSEO QUE RECIBE",outlined:""},model:{value:e.editedItem.recibe,callback:function(t){e.$set(e.editedItem,"recibe",t)},expression:"editedItem.recibe"}})],1)],1)],1)],1),t(r.h7,[t(u.Z),t(o.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.$emit("close")}}},[e._v(" Cancelar ")]),t(o.Z,{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v(" Salvar ")])],1)],1)},$=[],q={data(){return{error:""}},props:{formTitle:String,editedItem:Object,isNew:Boolean},methods:{showErrors(e){400===e.response.status?this.error=e.response.data.errors[0].msg:401===e.response.status?this.error=e.response.data.error.msg:this.error="No se pudo establecer la conexión con el servidor."},save(){""!==this.editedItem.municipio?""!==this.editedItem.donante?""!==this.editedItem.direccion?""!==this.editedItem.recibe?g.Z.createDonacion(this.editedItem).then((()=>{this.$emit("reload")})).catch(this.showErrors):this.error="La persona recibe en el museo es obligatoria.":this.error="La direccion de la persona que dona es obligatoria.":this.error="El nombre de la persona que dona es obligatorio.":this.error="El municipio es obligatorio."}},created(){console.log(this.editedItem.elementId)}},j=q,B=a(1001),U=(0,B.Z)(j,R,$,!1,null,null,null),M=U.exports,P={data(){return{e1:1,section:"armas",ver:!1,arma:{propietario:"",codigo:"",noInventario:"",cantidad:1,manifestacion:"",denominacion:"",fabrica:"",noSerie:"",ciudadPais:"",anio:0,epoca:"",alto:"",ancho:"",profundidad:"",calibre:"",materiales:"",mar:"",anx:"",sis:"",dec:"",ubicacion:"",estado:"",valor:"",gradoDeValor:"",origen:"",personalidad:"",acontecimiento:"",tasacion:"",expediente:"",notas:"",prestado:!1,recibido:!0},natural:{propietario:"",codigo:"",noInventario:"",cantidad:1,manifestacion:"",categoria:"",comun:"",tecnico:"",locColecta:"",pais:"",fechaColecta:"",colector:"",fecha:"",lote:"",alto:"",ancho:"",profundidad:"",ubicacion:"",estado:"",valor:"",gradoDeValor:"",procedencia:"",acontecimiento:"",expediente:"",prestado:!1,recibido:!0}}},props:{formTitle:String,editedItem:Object,isNew:Boolean},components:{ArmaCreateEdit:N.Z,NaturalCreateEdit:w.Z,DonacionCreateEdit:M},methods:{cancel(){this.e1=1,this.$emit("close")},getId(e){this.editedItem.elementId=e,this.editedItem.section=this.section},reload(){this.e1=1,this.$emit("reload")},mostrar(){this.e1=2,this.ver=!0}}},L=P,z=(0,B.Z)(L,E,O,!1,null,"f5770056",null),Q=z.exports,V={data:()=>({datos:[],articulo:{},dialog:!1,dialogInfo:!1,success:!1,headers:[{text:"MUNICIPIO",value:"municipio"},{text:"MUSEO",value:"museo"},{text:"FECHA",value:"fecha"},{text:"DONANTE",value:"donante"},{text:"DIRECCION",value:"direccion"},{text:"RECIBIDO POR",value:"recibe"},{text:"ARTICULO DONADO",value:"actions",sortable:!1,align:"center"}],editedIndex:-1,editedItem:{municipio:"",museo:"",donante:"",direccion:"",recibe:"",section:"armas",elementId:""},infoItem:{},defaultItem:{municipio:"",museo:"",donante:"",direccion:"",recibe:"",section:"armas",elementId:""}}),components:{ArmaDialog:b.Z,NaturalDialog:v.Z,DonacionStepper:Q},watch:{dialog(e){e||this.close()}},mounted(){this.requestDonaciones()},methods:{requestDonaciones(){g.Z.getDonaciones().then((e=>{this.datos=e,this.datos.forEach((e=>{e.fecha=e.fecha.slice(0,10)}))}))},requestArticulo(e){g.Z.getOneDonacion(e).then((e=>{this.articulo=e.articulo,this.articulo.registroEntrada=this.articulo.registroEntrada.slice(0,10)}))},reload(){this.close(),this.success=!0,this.requestDonaciones()},detailsItem(e){this.editedIndex=this.datos.indexOf(e),this.infoItem=Object.assign({},e),this.requestArticulo(e._id),this.dialogInfo=!0},editItem(e){this.success=!1,this.editedIndex=this.datos.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},closeInfo(){this.dialogInfo=!1,this.$nextTick((()=>{this.infoItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))}}},F=V,H=(0,B.Z)(F,p,f,!1,null,"58fecb4d",null),W=H.exports}}]);
//# sourceMappingURL=854.20f6aaa7.js.map